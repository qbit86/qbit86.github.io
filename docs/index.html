<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.png"/><title>Viktor Pti - Digital garden</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/daf847d18a456c230b8e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/daf847d18a456c230b8e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/31ae0556f2f5d1468049.css" as="style"/><link rel="stylesheet" href="/_next/static/css/31ae0556f2f5d1468049.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-a5f3ab04ac3ce8f1dc0c.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" as="script"/><link rel="preload" href="/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.1ffeaa57620d63089a8a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-ae474015553fa47ed684.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.4560eff6ba97a6e77925.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/index-5bcffd457fcb1d7772c3.js" as="script"/></head><body><div id="__next"><div class="layout_container__1LfYE"><header class="layout_header__1OJ41"><img src="/images/profile.svg" class="utils_borderCircle__13qdJ" height="144" width="144" alt="Виктор Птицелов"/><h1 class="utils_heading2Xl__1I65m">Виктор Птицелов</h1></header><main><section class="utils_headingMd__3de6G utils_padding1px__oCny8"><ul class="utils_list__S7_pe"><li class="utils_listItem__2eJpJ"><a href="/posts/angle-between-two-vectors">Угол между двумя векторами</a><br/><small class="utils_lightText__12Ckm"><time dateTime="2021-03-11">11 Mar 2021</time>, <time dateTime="2021-03-19">19 Mar 2021</time></small></li></ul></section></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdownPosts":[{"slug":"angle-between-two-vectors","path":"C:\\Users\\Viktor\\Documents\\GitHub\\digital-garden\\_posts\\angle-between-two-vectors.md","grayMatter":{"content":"\r\nУгол $\\phi$ между двумя векторами на двумерной плоскости вычисляется по формуле:[¹]\r\n\r\n$$\\phi = \\operatorname{atan2}\\left(\\mathbf{a}\\wedge\\mathbf{b}, \\mathbf{a}\\cdot\\mathbf{b}\\right)$$\r\n\r\nЗдесь:\r\n- $\\mathbf{a}\\cdot\\mathbf{b}$ — скалярное произведение (dot product) векторов,\r\n- $\\mathbf{a}\\wedge\\mathbf{b}$ — псевдоскалярное или косое произведение (wedge product)[²] векторов на плоскости,\r\n- $\\operatorname{atan2}$ — двухаргументный арктангенс,[³] есть в стандартной библиотеке любого языка программирования.\r\n\r\nПолучается эта формула делением двух соотношений:\r\n\r\n$$\\mathbf{a}\\wedge\\mathbf{b} = \\lVert \\mathbf{a} \\rVert \\lVert \\mathbf{b} \\rVert \\sin{\\phi}$$\r\n\r\n$$\\mathbf{a}\\cdot\\mathbf{b} = \\lVert \\mathbf{a} \\rVert \\lVert \\mathbf{b} \\rVert \\cos{\\phi}$$\r\n\r\nМожно выразить угол и из последней формулы, но у такого подхода будут недостатки:\r\n- извлечение квадратных корней при вычислении длин векторов,\r\n- явное деление, проверка знаменателя,\r\n- из-за погрешности вычислений аргумент арккосинуса может получиться больше 1.\r\n\r\nЕсли векторы заданы своими декартовыми координатами, то произведения могут быть вычислены так:\r\n\r\n$$\\mathbf{a}\\wedge\\mathbf{b} = a_x b_y - a_y b_x = \\begin{vmatrix} a_x \u0026 a_y \\\\ b_x \u0026 b_y \\end{vmatrix}$$\r\n\r\n$$\\mathbf{a}\\cdot\\mathbf{b} = a_x b_x + a_y b_y$$\r\n\r\nДля трёхмерного евклидова пространства угол выражается через векторное произведение (cross product):[⁴]\r\n\r\n$$\\phi = \\operatorname{atan2}\\left(\\lVert \\mathbf{a}\\times\\mathbf{b} \\rVert, \\mathbf{a}\\cdot\\mathbf{b}\\right)$$\r\n\r\nЧасто в вычислительной геометрии можно обойтись без получения самого угла.\r\nНапример, проверку ${\\phi \u003c \\varepsilon}$ можно заменить на сравнение ${(\\mathbf{a}\\cdot\\mathbf{b})^2 \u003e \\lVert \\mathbf{a} \\rVert^2 \\lVert \\mathbf{b} \\rVert^2 \\cos^2{\\varepsilon}}$.\r\n(Здесь мы учли, что косинус убывает для углов на отрезке $\\left[0, \\pi\\right]$.)\r\nВ декартовых координатах это соотношение выражается без обратных тригонометрических функций, корней или деления: ${(a_x b_x + a_y b_y)^2 \u003e (a_x^2 + a_y^2) (b_x^2 + b_y^2) \\cos^2{\\varepsilon}}$.\r\n\r\n---\r\n\r\n\u003ca id=\"footnotes\"\u003e\u003c/a\u003e\r\n- ¹ _winnie, [Угол между двумя векторами](https://users.livejournal.com/-winnie/237714.html)\r\n- ² [Псевдоскалярное произведение](https://ru.wikipedia.org/wiki/Псевдоскалярное_произведение)\r\n- ³ [Atan2](https://en.wikipedia.org/wiki/Atan2)\r\n- ⁴ [Векторное произведение](https://ru.wikipedia.org/wiki/Векторное_произведение)\r\n\r\n[¹]: #footnotes\r\n[²]: #footnotes\r\n[³]: #footnotes\r\n[⁴]: #footnotes\r\n","data":{"title":"Угол между двумя векторами","datePublished":"2021-03-11","dateUpdated":"2021-03-19","containsMath":true},"isEmpty":false,"excerpt":"","path":"C:\\Users\\Viktor\\Documents\\GitHub\\digital-garden\\_posts\\angle-between-two-vectors.md"}}]},"__N_SSG":true},"page":"/","query":{},"buildId":"HDAktskdjhOh_XSr7fR36","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8f31809deb7932dd0187.js"></script><script src="/_next/static/chunks/main-a5f3ab04ac3ce8f1dc0c.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" async=""></script><script src="/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.1ffeaa57620d63089a8a.js" async=""></script><script src="/_next/static/chunks/pages/_app-ae474015553fa47ed684.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.4560eff6ba97a6e77925.js" async=""></script><script src="/_next/static/chunks/pages/index-5bcffd457fcb1d7772c3.js" async=""></script><script src="/_next/static/HDAktskdjhOh_XSr7fR36/_buildManifest.js" async=""></script><script src="/_next/static/HDAktskdjhOh_XSr7fR36/_ssgManifest.js" async=""></script></body></html>