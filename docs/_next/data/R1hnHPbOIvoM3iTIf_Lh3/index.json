{"pageProps":{"markdownPosts":[{"slug":"angle-between-two-vectors","path":"C:\\Users\\Viktor\\Documents\\GitHub\\digital-garden\\_posts\\angle-between-two-vectors.md","grayMatter":{"content":"\r\nУгол $\\phi$ между двумя векторами на двумерной плоскости вычисляется по формуле:\r\n\r\n$$\\phi = \\operatorname{atan2}\\left(\\mathbf{a}\\wedge\\mathbf{b}, \\mathbf{a}\\cdot\\mathbf{b}\\right)$$\r\n\r\nЗдесь:\r\n- $\\mathbf{a}\\cdot\\mathbf{b}$ — скалярное произведение (dot product) векторов,\r\n- $\\mathbf{a}\\wedge\\mathbf{b}$ — псевдоскалярное или косое произведение (wedge product)[^1] векторов на плоскости,\r\n- $\\operatorname{atan2}$ — двухаргументный арктангенс,[^2] есть в стандартной библиотеке любого языка программирования.\r\n\r\nПолучается эта формула делением двух соотношений:\r\n\r\n$$\\mathbf{a}\\wedge\\mathbf{b} = \\lVert \\mathbf{a} \\rVert \\lVert \\mathbf{b} \\rVert \\sin{\\phi}$$\r\n\r\n$$\\mathbf{a}\\cdot\\mathbf{b} = \\lVert \\mathbf{a} \\rVert \\lVert \\mathbf{b} \\rVert \\cos{\\phi}$$\r\n\r\nМожно выразить угол и из последней формулы, но у такого подхода будут недостатки:\r\n- извлечение квадратных корней при вычислении длин векторов,\r\n- явное деление, проверка знаменателя,\r\n- из-за погрешности вычислений аргумент арккосинуса может получиться больше 1.\r\n\r\nЕсли векторы заданы своими декартовыми координатами, то произведения могут быть вычислены так:\r\n\r\n$$\\mathbf{a}\\wedge\\mathbf{b} = a_x b_y - a_y b_x = \\begin{vmatrix} a_x & a_y \\\\ b_x & b_y \\end{vmatrix}$$\r\n\r\n$$\\mathbf{a}\\cdot\\mathbf{b} = a_x b_x + a_y b_y$$\r\n\r\nДля трёхмерного евклидова пространства угол выражается через векторное произведение (cross product):[^3]\r\n\r\n$$\\phi = \\operatorname{atan2}\\left(\\lVert \\mathbf{a}\\times\\mathbf{b} \\rVert, \\mathbf{a}\\cdot\\mathbf{b}\\right)$$\r\n\r\nЧасто в вычислительной геометрии можно обойтись без получения самого угла.\r\nНапример, проверку ${\\phi < \\varepsilon}$ можно заменить на сравнение ${(\\mathbf{a}\\cdot\\mathbf{b})^2 > \\lVert \\mathbf{a} \\rVert^2 \\lVert \\mathbf{b} \\rVert^2 \\cos^2{\\varepsilon}}$.\r\n(Здесь мы учли, что косинус убывает для углов на отрезке $\\left[0, \\pi\\right]$.)\r\nВ декартовых координатах это соотношение выражается без обратных тригонометрических функций, корней или деления: ${(a_x b_x + a_y b_y)^2 > (a_x^2 + a_y^2) (b_x^2 + b_y^2) \\cos^2{\\varepsilon}}$.\r\n\r\n## Ссылки\r\n\r\n- _winnie, [Угол между двумя векторами](https://users.livejournal.com/-winnie/237714.html)\r\n\r\n[^1]: [Псевдоскалярное произведение](https://ru.wikipedia.org/wiki/Псевдоскалярное_произведение)\r\n[^2]: [Atan2](https://en.wikipedia.org/wiki/Atan2)\r\n[^3]: [Векторное произведение](https://ru.wikipedia.org/wiki/Векторное_произведение)\r\n","data":{"title":"Угол между двумя векторами","datePublished":"2021-03-11","dateUpdated":"2021-03-22","containsMath":true},"isEmpty":false,"excerpt":"","path":"C:\\Users\\Viktor\\Documents\\GitHub\\digital-garden\\_posts\\angle-between-two-vectors.md"}}]},"__N_SSG":true}